<!--
   Name: Kennedy Page
   Date: 12.07.24
   CSC 372-01

   This file defines the view for bulk uploading books in the admin section of the BookedUp project.
   It provides a form for admin users to upload a file (e.g., CSV or JSON) containing multiple 
   book records to be added to the database.

-->

<h2>Bulk Upload Products</h2>
<form action="/admin/bulk-upload" method="POST" enctype="multipart/form-data">
    <div class="mb-3">
        <label for="jsonFile" class="form-label">Upload JSON File</label>
        <input type="file" name="jsonFile" id="jsonFile" class="form-control" accept=".json" required>
    </div>
    <button type="submit" class="btn btn-primary">Upload</button>
</form>

<div class="container mt-4 d-flex justify-content-center my-3">
  <!-- Back to Dashboard Button -->
  <div class="mb-3">
    <a href="/admin" class="btn btn-secondary">Back to Dashboard</a>
  </div>

<script>
    // Check for messages in the query string
    const urlParams = new URLSearchParams(window.location.search);
    const message = urlParams.get('message');
    const error = urlParams.get('error');

    // Display dialog boxes for messages
    if (message) {
        alert(`✅ Success: ${message}`);
    } else if (error) {
        alert(`❌ Error: ${error}`);
    }

    // Clear the query parameters from the URL after displaying
    if (message || error) {
        window.history.replaceState({}, document.title, window.location.pathname);
    }
</script>
